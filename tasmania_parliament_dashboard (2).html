<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tasmania Parliament Monitor - Government Relations Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #004d3d;
            --secondary: #0066cc;
            --accent: #ff6b35;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --dark: #2c3e50;
            --light: #f8f9fa;
            --border: #dee2e6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .notification-bell {
            position: relative;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .notification-bell:hover {
            background: var(--light);
        }

        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 10px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow-x: auto;
        }

        .nav-tab {
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            border: 2px solid transparent;
        }

        .nav-tab:hover {
            background: var(--light);
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-title {
            font-size: 14px;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-change {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .stat-change.positive {
            background: #d4edda;
            color: var(--success);
        }

        .stat-change.negative {
            background: #f8d7da;
            color: var(--danger);
        }

        /* Activity Feed */
        .activity-feed {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }

        .feed-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .feed-title {
            font-size: 18px;
            font-weight: 600;
        }

        .feed-filters {
            display: flex;
            gap: 10px;
        }

        .filter-btn {
            padding: 6px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        .filter-btn:hover {
            background: var(--light);
        }

        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .feed-items {
            max-height: 500px;
            overflow-y: auto;
        }

        .feed-item {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            transition: background 0.3s;
            cursor: pointer;
        }

        .feed-item:hover {
            background: #f8f9fa;
        }

        .feed-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .feed-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-critical {
            background: #ffe0e0;
            color: var(--danger);
        }

        .badge-high {
            background: #fff3cd;
            color: #856404;
        }

        .badge-standard {
            background: #e7f3ff;
            color: var(--secondary);
        }

        .badge-new {
            background: #d4edda;
            color: var(--success);
        }

        .feed-time {
            color: #6c757d;
            font-size: 12px;
        }

        .feed-title-text {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .feed-description {
            color: #6c757d;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .feed-keywords {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .keyword-tag {
            padding: 3px 10px;
            background: #e7f3ff;
            color: var(--secondary);
            border-radius: 12px;
            font-size: 12px;
        }

        /* Document Viewer Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background: var(--light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 20px;
        }

        /* Keywords & Watchlist */
        .watchlist-panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }

        .watchlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .add-keyword-btn {
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .add-keyword-btn:hover {
            background: #003d2d;
        }

        .keyword-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .keyword-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: #f0f0f0;
            border-radius: 20px;
            transition: all 0.3s;
        }

        .keyword-item:hover {
            background: #e0e0e0;
        }

        .keyword-remove {
            cursor: pointer;
            color: #999;
            font-weight: bold;
        }

        /* Alerts Panel */
        .alerts-panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }

        .alert-item {
            padding: 15px 20px;
            border-left: 4px solid;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .alert-item.critical {
            border-left-color: var(--danger);
            background: #fff5f5;
        }

        .alert-item.high {
            border-left-color: var(--warning);
            background: #fffbf0;
        }

        .alert-item.standard {
            border-left-color: var(--secondary);
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .alert-description {
            color: #6c757d;
            font-size: 14px;
        }

        .alert-actions {
            display: flex;
            gap: 10px;
        }

        .alert-action-btn {
            padding: 6px 12px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .alert-action-btn:hover {
            background: var(--light);
        }

        /* Charts Container */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .chart-header {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .chart-placeholder {
            height: 250px;
            background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%, transparent 75%, #f0f0f0 75%, #f0f0f0),
                        linear-gradient(45deg, #f0f0f0 25%, transparent 25%, transparent 75%, #f0f0f0 75%, #f0f0f0);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
        }

        /* Settings Panel */
        .settings-panel {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .settings-section {
            margin-bottom: 30px;
        }

        .settings-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .setting-label {
            font-weight: 500;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Loading State */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0,0,0,.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from {
                transform: translateY(-30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-tabs {
                flex-wrap: nowrap;
                overflow-x: auto;
                padding-bottom: 10px;
            }
        }

        /* Member tracking */
        .member-grid {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .member-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .member-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .member-name {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .member-role {
            color: #6c757d;
            font-size: 13px;
            margin-bottom: 10px;
        }

        .member-stats {
            display: flex;
            justify-content: space-between;
            padding-top: 10px;
            border-top: 1px solid var(--border);
            font-size: 12px;
        }

        /* Committee Tracker */
        .committee-list {
            display: none;
            margin-top: 20px;
        }

        .committee-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .committee-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .committee-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }

        .committee-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active {
            background: #d4edda;
            color: var(--success);
        }

        .status-inquiry {
            background: #fff3cd;
            color: #856404;
        }

        .committee-details {
            color: #6c757d;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">üèõÔ∏è</div>
                <span>Tasmania Parliament Monitor</span>
            </div>
            <div class="header-actions">
                <div class="notification-bell" onclick="showAlerts()">
                    üîî
                    <span class="notification-badge" id="notificationCount">7</span>
                </div>
                <button class="filter-btn" onclick="toggleSettings()">‚öôÔ∏è Settings</button>
                <button class="filter-btn" style="background: var(--primary); color: white;" onclick="syncNow()">üîÑ Sync Now</button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="nav-tab active" onclick="switchTab('dashboard', this)">Dashboard</div>
            <div class="nav-tab" onclick="switchTab('documents', this)">Documents</div>
            <div class="nav-tab" onclick="switchTab('members', this)">Members</div>
            <div class="nav-tab" onclick="switchTab('committees', this)">Committees</div>
            <div class="nav-tab" onclick="switchTab('alerts', this)">Alerts</div>
            <div class="nav-tab" onclick="switchTab('watchlist', this)">Watchlist</div>
            <div class="nav-tab" onclick="switchTab('reports', this)">Reports</div>
        </div>

        <!-- Dashboard View -->
        <div id="dashboard-content">
            <!-- Stats Grid -->
            <div class="dashboard-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-title">New Today</span>
                        <div class="stat-icon" style="background: #e3f2fd; color: var(--secondary);">üìÑ</div>
                    </div>
                    <div class="stat-value" id="total-documents-count">0</div>
                    <span class="stat-change positive" id="documents-change">Up to date</span>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-title">Active Alerts</span>
                        <div class="stat-icon" style="background: #ffe0e0; color: var(--danger);">‚ö†Ô∏è</div>
                    </div>
                    <div class="stat-value" id="total-alerts-count">0</div>
                    <span class="stat-change negative">
                        <span id="critical-alerts-count">0</span> critical, 
                        <span id="high-alerts-count">0</span> high, 
                        <span id="standard-alerts-count">0</span> standard
                    </span>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-title">Watching</span>
                        <div class="stat-icon" style="background: #d4edda; color: var(--success);">üëÅÔ∏è</div>
                    </div>
                    <div class="stat-value" id="watching-total-count">0</div>
                    <span class="stat-change positive">
                        <span id="keyword-count">0</span> topics, 
                        <span id="member-count">0</span> members, 
                        <span id="committee-count">0</span> committees
                    </span>
                </div>
            </div>

            <!-- Activity Feed -->
            <div class="activity-feed">
                <div class="feed-header">
                    <h2 class="feed-title">Recent Activity</h2>
                    <div class="feed-filters">
                        <button class="filter-btn active" onclick="filterFeed('all', this)">All</button>
                        <button class="filter-btn" onclick="filterFeed('critical', this)">Critical</button>
                        <button class="filter-btn" onclick="filterFeed('tabled', this)">Tabled Papers</button>
                        <button class="filter-btn" onclick="filterFeed('bills', this)">Bills</button>
                        <button class="filter-btn" onclick="filterFeed('committees', this)">Committees</button>
                    </div>
                </div>
                <div class="feed-items" id="feedItems">
                    <!-- Feed items will be dynamically generated -->
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
                <div class="chart-card">
                    <h3 class="chart-header">Document Activity (7 Days)</h3>
                    <canvas id="activityChart" height="250"></canvas>
                </div>
                <div class="chart-card">
                    <h3 class="chart-header">Portfolio Distribution</h3>
                    <canvas id="portfolioChart" height="250"></canvas>
                </div>
            </div>
        </div>

        <!-- Members View (hidden by default) -->
        <div class="member-grid" id="members-content">
            <!-- Member cards will be dynamically generated -->
        </div>

        <!-- Committees View (hidden by default) -->
        <div class="committee-list" id="committees-content">
            <!-- Committee items will be dynamically generated -->
        </div>

        <!-- Alerts Panel (hidden by default) -->
        <div class="alerts-panel" id="alerts-content" style="display: none;">
            <div class="feed-header">
                <h2 class="feed-title">Alert Configuration</h2>
            </div>
            <div id="alertsList">
                <!-- Alert items will be dynamically generated -->
            </div>
        </div>

        <!-- Watchlist Panel (hidden by default) -->
        <div class="watchlist-panel" id="watchlist-content" style="display: none;">
            <div class="watchlist-header">
                <h2 class="feed-title">Keywords & Topics</h2>
                <button class="add-keyword-btn" onclick="addKeyword()">+ Add Keyword</button>
            </div>
            <div class="keyword-list" id="keywordList">
                <!-- Keywords will be dynamically generated -->
            </div>
        </div>

        <!-- Settings Panel (hidden by default) -->
        <div class="settings-panel" id="settings-content">
            <div class="settings-section">
                <h2 class="settings-title">Notification Settings</h2>
                <div class="setting-item">
                    <span class="setting-label">Email Notifications</span>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <span class="setting-label">Push Notifications</span>
                    <label class="toggle-switch">
                        <input type="checkbox">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <span class="setting-label">Daily Digest</span>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            <div class="settings-section">
                <h2 class="settings-title">Monitoring Sources</h2>
                <div class="setting-item">
                    <span class="setting-label">House of Assembly</span>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <span class="setting-label">Legislative Council</span>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <span class="setting-label">Committee Reports</span>
                    <label class="toggle-switch">
                        <input type="checkbox" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Document Viewer Modal -->
    <div class="modal" id="documentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Document Viewer</h2>
                <button class="modal-close" onclick="closeModal()">‚úï</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Document content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        /**
         * Dynamic dashboard script
         * Fetches data from the backend API and populates the UI.
         * This replaces the previous static sample data and implements
         * real-time monitoring functionality.
         */
        // Global state containers
        let feedData = [];
        let membersData = [];
        let committeesData = [];
        let alertsData = [];
        let keywordsData = [];
        let statsData = {};

        // Fetch statistics from the API and update UI
        async function fetchStats() {
            try {
                const res = await fetch('/api/stats');
                if (!res.ok) throw new Error('Failed to fetch stats');
                statsData = await res.json();
                updateStatsUI();
            } catch (error) {
                console.error('Error fetching stats:', error);
            }
        }

        // Update statistics UI elements
        function updateStatsUI() {
            document.getElementById('total-documents-count').textContent = statsData.new_today || 0;
            document.getElementById('total-alerts-count').textContent = statsData.total_alerts || 0;
            document.getElementById('critical-alerts-count').textContent = (statsData.active_alerts && statsData.active_alerts.critical) || 0;
            document.getElementById('high-alerts-count').textContent = (statsData.active_alerts && statsData.active_alerts.high) || 0;
            document.getElementById('standard-alerts-count').textContent = (statsData.active_alerts && statsData.active_alerts.standard) || 0;
            document.getElementById('keyword-count').textContent = (statsData.watching && statsData.watching.keywords) || 0;
            document.getElementById('member-count').textContent = (statsData.watching && statsData.watching.members) || 0;
            document.getElementById('committee-count').textContent = (statsData.watching && statsData.watching.committees) || 0;
        }

        // Fetch feed items
        async function fetchFeed() {
            try {
                const res = await fetch('/api/feed');
                if (!res.ok) throw new Error('Failed to fetch feed');
                feedData = await res.json();
                initializeFeed();
            } catch (error) {
                console.error('Error fetching feed:', error);
            }
        }

        // Fetch members
        async function fetchMembers() {
            try {
                const res = await fetch('/api/members');
                if (!res.ok) throw new Error('Failed to fetch members');
                const data = await res.json();
                membersData = data.members || [];
            } catch (error) {
                console.error('Error fetching members:', error);
            }
        }

        // Fetch committees
        async function fetchCommittees() {
            try {
                const res = await fetch('/api/committees');
                if (!res.ok) throw new Error('Failed to fetch committees');
                const data = await res.json();
                committeesData = data.committees || [];
            } catch (error) {
                console.error('Error fetching committees:', error);
            }
        }

        // Fetch alerts
        async function fetchAlerts() {
            try {
                const res = await fetch('/api/alerts');
                if (!res.ok) throw new Error('Failed to fetch alerts');
                const data = await res.json();
                alertsData = data.alerts || [];
            } catch (error) {
                console.error('Error fetching alerts:', error);
            }
        }

        // Fetch keywords
        async function fetchKeywords() {
            try {
                const res = await fetch('/api/keywords');
                if (!res.ok) throw new Error('Failed to fetch keywords');
                const data = await res.json();
                keywordsData = data.keywords || [];
            } catch (error) {
                console.error('Error fetching keywords:', error);
            }
        }

        // Refresh all data concurrently
        async function refreshData() {
            await Promise.all([
                fetchStats(),
                fetchFeed(),
                fetchMembers(),
                fetchCommittees(),
                fetchAlerts(),
                fetchKeywords()
            ]);
        }

        // Initialize feed UI
        function initializeFeed() {
            const feedContainer = document.getElementById('feedItems');
            if (!feedContainer) return;
            feedContainer.innerHTML = '';
            feedData.forEach(item => {
                const feedItem = createFeedItem(item);
                feedContainer.appendChild(feedItem);
            });
        }

        // Create feed item element
        function createFeedItem(item) {
            const div = document.createElement('div');
            div.className = 'feed-item';
            div.onclick = () => showDocument(item);
            div.innerHTML = `
                <div class="feed-item-header">
                    <span class="feed-badge badge-${item.type || 'standard'}">${item.type || 'standard'}</span>
                    <span class="feed-time">${item.time || ''}</span>
                </div>
                <div class="feed-title-text">${item.title}</div>
                <div class="feed-description">${item.description || ''}</div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="feed-keywords">
                        ${(item.keywords || []).map(k => `<span class="keyword-tag">${k}</span>`).join('')}
                    </div>
                    <div style="color: #6c757d; font-size: 12px;">
                        ${item.chamber || 'Unknown'} ‚Ä¢ ${item.document || ''}
                    </div>
                </div>
            `;
            return div;
        }

        // Filter feed items by type
        function filterFeed(type, btn) {
            // Update button states
            document.querySelectorAll('.feed-filters .filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const items = document.querySelectorAll('.feed-item');
            items.forEach(item => {
                if (type === 'all') {
                    item.style.display = 'block';
                } else {
                    const badge = item.querySelector('.feed-badge');
                    item.style.display = (badge && badge.textContent === type) ? 'block' : 'none';
                }
            });
        }

        // Display document details in modal
        function showDocument(item) {
            const modal = document.getElementById('documentModal');
            document.getElementById('modalTitle').textContent = item.title;
            document.getElementById('modalBody').innerHTML = `
                <div style="margin-bottom: 20px;">
                    <strong>Document:</strong> ${item.document || ''}<br>
                    <strong>Chamber:</strong> ${item.chamber || 'N/A'}<br>
                    <strong>Date:</strong> ${item.date || new Date().toLocaleDateString()}<br>
                    <strong>Type:</strong> ${item.type || ''}
                </div>
                <div style="padding: 20px; background: #f8f9fa; border-radius: 8px; margin-bottom: 20px;">
                    <h3>Summary</h3>
                    <p>${item.description || 'No description available.'}</p>
                </div>
            `;
            modal.classList.add('active');
        }

        // Close the document modal
        function closeModal() {
            document.getElementById('documentModal').classList.remove('active');
        }

        // Switch tabs and populate content
        function switchTab(tab, element) {
            // Update active tab
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');
            // Hide all content sections
            ['dashboard-content','members-content','committees-content','alerts-content','watchlist-content','settings-content'].forEach(id => {
                document.getElementById(id).style.display = 'none';
            });
            if (tab === 'dashboard') {
                document.getElementById('dashboard-content').style.display = 'block';
            } else if (tab === 'members') {
                const container = document.getElementById('members-content');
                container.style.display = 'grid';
                container.innerHTML = '';
                membersData.forEach(member => {
                    const card = document.createElement('div');
                    card.className = 'member-card';
                    card.innerHTML = `
                        <div class="member-name">${member.name}</div>
                        <div class="member-role">${member.role} ‚Ä¢ ${member.party || ''}</div>
                        <div class="member-stats">
                            <span>üìä ${member.mentions || 0} mentions</span>
                            <span>üèõÔ∏è ${member.committees ? member.committees.length : 0} committees</span>
                        </div>
                    `;
                    container.appendChild(card);
                });
            } else if (tab === 'committees') {
                const container = document.getElementById('committees-content');
                container.style.display = 'block';
                container.innerHTML = '';
                committeesData.forEach(com => {
                    const item = document.createElement('div');
                    item.className = 'committee-item';
                    item.innerHTML = `
                        <div class="committee-header">
                            <div class="committee-name">${com.name}</div>
                            <span class="committee-status status-${com.status}">${com.status}</span>
                        </div>
                        <div class="committee-details">
                            <p>${com.description || ''}</p>
                            <div style="margin-top: 10px; display: flex; justify-content: space-between; font-size: 14px;">
                                <span>üìÖ Next: ${com.nextMeeting || 'N/A'}</span>
                                <span>üìù ${(com.submissions || 0)} submissions</span>
                            </div>
                        </div>
                    `;
                    container.appendChild(item);
                });
            } else if (tab === 'alerts') {
                const container = document.getElementById('alertsList');
                container.innerHTML = '';
                alertsData.forEach(alert => {
                    const item = document.createElement('div');
                    item.className = `alert-item ${alert.level}`;
                    item.innerHTML = `
                        <div class="alert-content">
                            <div class="alert-title">${alert.title}</div>
                            <div class="alert-description">${alert.description || ''}</div>
                        </div>
                        <div class="alert-actions">
                            <button class="alert-action-btn" onclick="showDocument({title: alert.title, description: alert.description, document: alert.document_url, chamber: alert.chamber, type: alert.level})">View</button>
                        </div>
                    `;
                    container.appendChild(item);
                });
                document.getElementById('alerts-content').style.display = 'block';
            } else if (tab === 'watchlist') {
                const container = document.getElementById('keywordList');
                container.innerHTML = '';
                keywordsData.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'keyword-item';
                    div.innerHTML = `
                        ${item.keyword} <span class="keyword-remove" onclick="removeKeyword('${item.keyword}', '${item.category}', this)">√ó</span>
                    `;
                    container.appendChild(div);
                });
                document.getElementById('watchlist-content').style.display = 'block';
            }
        }

        // Remove keyword via API and update list
        async function removeKeyword(keyword, category, element) {
            try {
                const res = await fetch('/api/keywords', {
                    method: 'DELETE',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({keyword: keyword, category: category})
                });
                const data = await res.json();
                if (data.success) {
                    element.parentElement.remove();
                    await fetchKeywords();
                } else {
                    alert(data.message || 'Keyword not found');
                }
            } catch (error) {
                console.error('Error removing keyword:', error);
            }
        }

        // Add a keyword via API
        async function addKeyword() {
            const keyword = prompt('Enter keyword to watch:');
            if (!keyword) return;
            const category = prompt('Enter category (leave blank for custom):') || 'custom';
            try {
                const res = await fetch('/api/keywords', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({keyword: keyword, category: category})
                });
                const data = await res.json();
                if (data.success) {
                    await fetchKeywords();
                    switchTab('watchlist', document.querySelector('.nav-tab:nth-child(6)'));
                } else {
                    alert(data.message || 'Failed to add keyword');
                }
            } catch (error) {
                console.error('Error adding keyword:', error);
            }
        }

        // Trigger synchronization via API
        async function syncNow() {
            const btn = event.target;
            btn.innerHTML = '‚è≥ Syncing...';
            btn.disabled = true;
            try {
                const res = await fetch('/api/sync', {method: 'POST'});
                const data = await res.json();
                if (data.success) {
                    btn.innerHTML = '‚úì Synced';
                    await refreshData();
                    const countElem = document.getElementById('notificationCount');
                    const current = parseInt(countElem.textContent) || 0;
                    countElem.textContent = current + (data.new_documents || 0);
                } else {
                    btn.innerHTML = '‚ö†Ô∏è Error';
                }
            } catch (error) {
                console.error('Error syncing:', error);
                btn.innerHTML = '‚ö†Ô∏è Error';
            } finally {
                setTimeout(() => {
                    btn.innerHTML = 'üîÑ Sync Now';
                    btn.disabled = false;
                }, 3000);
            }
        }

        // Navigate directly to alerts tab
        function showAlerts() {
            switchTab('alerts', document.querySelector('.nav-tab:nth-child(5)'));
        }

        // Initialize charts with placeholder data
        function initCharts() {
            const activityCtx = document.getElementById('activityChart');
            if (activityCtx) {
                new Chart(activityCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
                        datasets: [{
                            label: 'Documents',
                            data: [5,8,4,10,7,9,6],
                            borderColor: '#004d3d',
                            backgroundColor: 'rgba(0,77,61,0.1)',
                            tension: 0.4
                        },{
                            label: 'Alerts',
                            data: [1,2,1,3,2,1,2],
                            borderColor: '#ff6b35',
                            backgroundColor: 'rgba(255,107,53,0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' }
                        },
                        scales: {
                            y: { beginAtZero: true }
                        }
                    }
                });
            }
            const portfolioCtx = document.getElementById('portfolioChart');
            if (portfolioCtx) {
                new Chart(portfolioCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Health','Infrastructure','Environment','Gaming','Education','Other'],
                        datasets: [{
                            data: [25,20,15,18,12,10],
                            backgroundColor: [
                                '#004d3d','#0066cc','#ff6b35',
                                '#28a745','#ffc107','#6c757d'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'right' }
                        }
                    }
                });
            }
        }

        // Initialize page on DOM ready
        window.addEventListener('DOMContentLoaded', async () => {
            await refreshData();
            initCharts();
            setInterval(fetchStats, 60000);
        });

        const members = [
            { name: 'Hon. Jeremy Rockliff', role: 'Premier', party: 'Liberal', mentions: 45, committees: 2 },
            { name: 'Rebecca White', role: 'Opposition Leader', party: 'Labor', mentions: 38, committees: 3 },
            { name: 'Hon. Michael Ferguson', role: 'Deputy Premier', party: 'Liberal', mentions: 32, committees: 2 },
            { name: 'Dean Winter', role: 'Shadow Treasurer', party: 'Labor', mentions: 28, committees: 4 },
            { name: 'Cassy O\'Connor', role: 'Greens Leader', party: 'Greens', mentions: 24, committees: 3 },
            { name: 'Hon. Felix Ellis', role: 'Minister for Police', party: 'Liberal', mentions: 21, committees: 1 }
        ];

        const committees = [
            {
                name: 'Public Accounts Committee',
                status: 'inquiry',
                description: 'Currently reviewing infrastructure spending and major project cost overruns.',
                nextMeeting: '28 Oct 2025',
                submissions: 12
            },
            {
                name: 'Environment & Planning Committee',
                status: 'active',
                description: 'Examining climate adaptation strategies for coastal communities.',
                nextMeeting: '30 Oct 2025',
                submissions: 8
            },
            {
                name: 'Legislative Council GBE Scrutiny',
                status: 'active',
                description: 'Annual review of Government Business Enterprise performance.',
                nextMeeting: '5 Nov 2025',
                submissions: 4
            }
        ];

        const keywords = [
            'gaming', 'infrastructure', 'health', 'environment', 'planning',
            'tourism', 'education', 'housing', 'aboriginal heritage', 'forestry',
            'aquaculture', 'energy', 'mining'
        ];

        const alerts = [
            {
                level: 'critical',
                title: 'Gaming License Renewal Deadline',
                description: 'Compliance documents required by October 31, 2025',
                actions: ['View Requirements', 'Set Reminder']
            },
            {
                level: 'critical',
                title: 'Committee Submission Due',
                description: 'Public Accounts Committee infrastructure inquiry closes in 5 days',
                actions: ['Draft Submission', 'View Guidelines']
            },
            {
                level: 'high',
                title: 'New Environmental Regulations',
                description: 'Industrial waste management changes take effect November 1',
                actions: ['Read Changes', 'Impact Assessment']
            },
            {
                level: 'standard',
                title: 'Minister Ferguson Speech',
                description: 'Mentioned your industry sector in parliament yesterday',
                actions: ['Read Transcript', 'Add to Watch']
            },
            {
                level: 'standard',
                title: 'Weekly Portfolio Report Available',
                description: 'Your tracked portfolios summary for week ending Oct 22',
                actions: ['View Report', 'Download PDF']
            }
        ];

        // Initialize feed
        function initializeFeed() {
            const feedContainer = document.getElementById('feedItems');
            feedContainer.innerHTML = '';
            
            feedData.forEach(item => {
                const feedItem = createFeedItem(item);
                feedContainer.appendChild(feedItem);
            });
        }

        // Create feed item element
        function createFeedItem(item) {
            const div = document.createElement('div');
            div.className = 'feed-item';
            div.onclick = () => showDocument(item);
            
            div.innerHTML = `
                <div class="feed-item-header">
                    <span class="feed-badge badge-${item.type}">${item.type}</span>
                    <span class="feed-time">${item.time}</span>
                </div>
                <div class="feed-title-text">${item.title}</div>
                <div class="feed-description">${item.description}</div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="feed-keywords">
                        ${item.keywords.map(k => `<span class="keyword-tag">${k}</span>`).join('')}
                    </div>
                    <div style="color: #6c757d; font-size: 12px;">
                        ${item.chamber} ‚Ä¢ ${item.document}
                    </div>
                </div>
            `;
            
            return div;
        }

        // Filter feed
        function filterFeed(type, btn) {
            // Update button states
            document.querySelectorAll('.feed-filters .filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Filter items
            const items = document.querySelectorAll('.feed-item');
            items.forEach(item => {
                if (type === 'all') {
                    item.style.display = 'block';
                } else {
                    // In a real app, this would filter based on actual data
                    item.style.display = Math.random() > 0.3 ? 'block' : 'none';
                }
            });
        }

        // Show document modal
        function showDocument(item) {
            const modal = document.getElementById('documentModal');
            document.getElementById('modalTitle').textContent = item.title;
            document.getElementById('modalBody').innerHTML = `
                <div style="margin-bottom: 20px;">
                    <strong>Document:</strong> ${item.document}<br>
                    <strong>Chamber:</strong> ${item.chamber}<br>
                    <strong>Date:</strong> ${new Date().toLocaleDateString()}<br>
                    <strong>Type:</strong> ${item.type}
                </div>
                <div style="padding: 20px; background: #f8f9fa; border-radius: 8px; margin-bottom: 20px;">
                    <h3>Summary</h3>
                    <p>${item.description}</p>
                </div>
                <div style="padding: 20px; background: #fff3cd; border-radius: 8px; margin-bottom: 20px;">
                    <h3>Key Points</h3>
                    <ul>
                        <li>Implementation timeline: 30 days from publication</li>
                        <li>Affected sectors: Gaming, Hospitality, Tourism</li>
                        <li>Compliance requirements: Updated licensing framework</li>
                        <li>Penalties: Increased to $50,000 for non-compliance</li>
                    </ul>
                </div>
                <div style="padding: 20px; background: #d4edda; border-radius: 8px;">
                    <h3>Recommended Actions</h3>
                    <ul>
                        <li>Review current compliance status</li>
                        <li>Schedule legal consultation</li>
                        <li>Prepare submission if required</li>
                        <li>Update internal procedures</li>
                    </ul>
                </div>
                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button class="add-keyword-btn">Download PDF</button>
                    <button class="filter-btn">Add to Watchlist</button>
                    <button class="filter-btn">Share Report</button>
                </div>
            `;
            modal.classList.add('active');
        }

        // Close modal
        function closeModal() {
            document.getElementById('documentModal').classList.remove('active');
        }

        // Switch tabs
        function switchTab(tab, element) {
            // Update tab states
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');
            
            // Hide all content
            document.getElementById('dashboard-content').style.display = 'none';
            document.getElementById('members-content').style.display = 'none';
            document.getElementById('committees-content').style.display = 'none';
            document.getElementById('alerts-content').style.display = 'none';
            document.getElementById('watchlist-content').style.display = 'none';
            document.getElementById('settings-content').style.display = 'none';
            
            // Show selected content
            switch(tab) {
                case 'dashboard':
                    document.getElementById('dashboard-content').style.display = 'block';
                    break;
                case 'members':
                    document.getElementById('members-content').style.display = 'grid';
                    if (!document.getElementById('members-content').innerHTML) {
                        loadMembers();
                    }
                    break;
                case 'committees':
                    document.getElementById('committees-content').style.display = 'block';
                    if (!document.getElementById('committees-content').innerHTML) {
                        loadCommittees();
                    }
                    break;
                case 'alerts':
                    document.getElementById('alerts-content').style.display = 'block';
                    if (!document.getElementById('alertsList').innerHTML) {
                        loadAlerts();
                    }
                    break;
                case 'watchlist':
                    document.getElementById('watchlist-content').style.display = 'block';
                    if (!document.getElementById('keywordList').innerHTML) {
                        loadKeywords();
                    }
                    break;
                case 'reports':
                    alert('Reports section would show analytics and custom report generation');
                    switchTab('dashboard', document.querySelector('.nav-tab'));
                    break;
            }
        }

        // Load members
        function loadMembers() {
            const container = document.getElementById('members-content');
            container.innerHTML = '';
            
            members.forEach(member => {
                const card = document.createElement('div');
                card.className = 'member-card';
                card.innerHTML = `
                    <div class="member-name">${member.name}</div>
                    <div class="member-role">${member.role} ‚Ä¢ ${member.party}</div>
                    <div class="member-stats">
                        <span>üìä ${member.mentions} mentions</span>
                        <span>üèõÔ∏è ${member.committees} committees</span>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // Load committees
        function loadCommittees() {
            const container = document.getElementById('committees-content');
            container.innerHTML = '';
            
            committees.forEach(committee => {
                const item = document.createElement('div');
                item.className = 'committee-item';
                item.innerHTML = `
                    <div class="committee-header">
                        <div class="committee-name">${committee.name}</div>
                        <span class="committee-status status-${committee.status}">${committee.status}</span>
                    </div>
                    <div class="committee-details">
                        <p>${committee.description}</p>
                        <div style="margin-top: 10px; display: flex; justify-content: space-between; font-size: 14px;">
                            <span>üìÖ Next: ${committee.nextMeeting}</span>
                            <span>üìù ${committee.submissions} submissions</span>
                        </div>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Load alerts
        function loadAlerts() {
            const container = document.getElementById('alertsList');
            container.innerHTML = '';
            
            alerts.forEach(alert => {
                const item = document.createElement('div');
                item.className = `alert-item ${alert.level}`;
                item.innerHTML = `
                    <div class="alert-content">
                        <div class="alert-title">${alert.title}</div>
                        <div class="alert-description">${alert.description}</div>
                    </div>
                    <div class="alert-actions">
                        ${alert.actions.map(action => 
                            `<button class="alert-action-btn">${action}</button>`
                        ).join('')}
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Load keywords
        function loadKeywords() {
            const container = document.getElementById('keywordList');
            container.innerHTML = '';
            
            keywords.forEach(keyword => {
                const item = document.createElement('div');
                item.className = 'keyword-item';
                item.innerHTML = `
                    ${keyword}
                    <span class="keyword-remove" onclick="removeKeyword(this)">√ó</span>
                `;
                container.appendChild(item);
            });
        }

        // Add keyword
        function addKeyword() {
            const keyword = prompt('Enter keyword to watch:');
            if (keyword) {
                keywords.push(keyword);
                loadKeywords();
            }
        }

        // Remove keyword
        function removeKeyword(element) {
            element.parentElement.remove();
        }

        // Toggle settings
        function toggleSettings() {
            const settings = document.getElementById('settings-content');
            if (settings.style.display === 'none' || !settings.style.display) {
                // Hide all other content
                document.getElementById('dashboard-content').style.display = 'none';
                document.getElementById('members-content').style.display = 'none';
                document.getElementById('committees-content').style.display = 'none';
                document.getElementById('alerts-content').style.display = 'none';
                document.getElementById('watchlist-content').style.display = 'none';
                
                // Show settings
                settings.style.display = 'block';
                
                // Update tabs
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            } else {
                settings.style.display = 'none';
                switchTab('dashboard', document.querySelector('.nav-tab'));
            }
        }

        // Sync now
        function syncNow() {
            const btn = event.target;
            btn.innerHTML = '‚è≥ Syncing...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = '‚úì Synced';
                setTimeout(() => {
                    btn.innerHTML = 'üîÑ Sync Now';
                    btn.disabled = false;
                    
                    // Add a new item to the feed
                    const newItem = {
                        id: 99,
                        type: 'new',
                        title: 'Fresh Document Alert',
                        description: 'New document detected during sync - requires immediate review.',
                        time: 'Just now',
                        keywords: ['urgent', 'new'],
                        chamber: 'House of Assembly',
                        document: 'HA-2025-048'
                    };
                    
                    const feedContainer = document.getElementById('feedItems');
                    const firstItem = feedContainer.firstChild;
                    const newElement = createFeedItem(newItem);
                    feedContainer.insertBefore(newElement, firstItem);
                    
                    // Update notification count
                    const count = document.getElementById('notificationCount');
                    count.textContent = parseInt(count.textContent) + 1;
                }, 2000);
            }, 3000);
        }

        // Show alerts
        function showAlerts() {
            switchTab('alerts', document.querySelector('.nav-tab:nth-child(5)'));
        }

        // Initialize charts
        function initCharts() {
            // Activity Chart
            const activityCtx = document.getElementById('activityChart');
            if (activityCtx) {
                new Chart(activityCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Documents',
                            data: [12, 19, 8, 15, 22, 9, 12],
                            borderColor: '#004d3d',
                            backgroundColor: 'rgba(0, 77, 61, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Alerts',
                            data: [5, 8, 3, 7, 12, 4, 7],
                            borderColor: '#ff6b35',
                            backgroundColor: 'rgba(255, 107, 53, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }

            // Portfolio Chart
            const portfolioCtx = document.getElementById('portfolioChart');
            if (portfolioCtx) {
                new Chart(portfolioCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Health', 'Infrastructure', 'Environment', 'Gaming', 'Education', 'Other'],
                        datasets: [{
                            data: [25, 20, 15, 18, 12, 10],
                            backgroundColor: [
                                '#004d3d',
                                '#0066cc',
                                '#ff6b35',
                                '#28a745',
                                '#ffc107',
                                '#6c757d'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right'
                            }
                        }
                    }
                });
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            initializeFeed();
            initCharts();
        });

        /*
         * Real-time notifications are handled by fetching data from the backend. The previous
         * simulation of random notifications has been removed. The dashboard now relies on
         * actual data retrieved via API calls (see fetchStats and related functions).
         */
    </script>
</body>
</html>